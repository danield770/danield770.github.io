(this["webpackJsonpyoutube-playlist"]=this["webpackJsonpyoutube-playlist"]||[]).push([[0],{41:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var i,r,o,a=n(1),c=n.n(a),d=n(16),l=n.n(d),s=(n(41),n(4)),u=n(12),b=n(13),p=n(5),O=n(20),j=n(3),f=p.a.li(i||(i=Object(s.a)(["\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: white;\n  border: 1px solid #111;\n  margin-bottom: 0.5rem;\n"]))),v=p.a.button(r||(r=Object(s.a)(["\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n"]))),g=p.a.span(o||(o=Object(s.a)(["\n  width: 70%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])));var m=function(e){var t=e.id,n=e.title,i=e.duration,r=e.deleteVideo,o=e.index;return Object(j.jsx)(O.b,{draggableId:t,index:o,children:function(e){return Object(j.jsxs)(f,Object(u.a)(Object(u.a)(Object(u.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[Object(j.jsx)(g,{title:n,children:n}),Object(j.jsx)("span",{children:i}),Object(j.jsx)(v,{type:"button",onClick:function(){r(t)},children:"Delete"})]}))}})},h=n(22),_=n(14),S=n.n(_),E=n(21),x=n(26);n(65);x.a.initializeApp({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/youtube-playlist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_APP_ID});var y=x.a.firestore().collection("videos"),T=y.orderBy("timestamp"),A=function(){var e=Object(E.a)(S.a.mark((function e(t){var n,i,r,o,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i=t.youtubeId,r=t.title,o=t.duration,a=t.timestamp,console.log("addding video to firebase",n,i,o,r,a),e.next=4,y.doc(n).set({id:n,youtubeId:i,title:r,duration:o,timestamp:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.doc(t).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.doc(t).get();case 2:if(!(n=e.sent).exists){e.next=5;break}return e.abrupt("return",n.data());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(E.a)(S.a.mark((function e(t,n,i){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.doc(t).update(Object(h.a)({},n,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();var C,w,I,F,K,V,H=function(e){var t=Object(a.useState)(null),n=Object(b.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(!1),c=Object(b.a)(o,2),d=c[0],l=c[1];return Object(a.useEffect)((function(){e&&(l(!0),r(null),fetch(e).then((function(e){return e.json()})).then((function(e){l(!1),r(e)})).catch((function(e){l(!1)})))}),[e]),{data:i,isLoading:d}},W=Object(p.b)(C||(C=Object(s.a)(["\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),N=p.a.div(w||(w=Object(s.a)(["\n  width: 0.6rem;\n  height: 0.6rem;\n  border: 2px solid aqua;\n  border-top: 2px solid transparent;\n  border-radius: 50%;\n  animation: "," 0.5s linear infinite;\n"])),W),B=p.a.div(I||(I=Object(s.a)(["\n  color: red;\n  font-size: 0.8rem;\n  position: absolute;\n  left: 0;\n  top: 100%;\n  margin-top: 0.5rem;\n"]))),L=p.a.form(F||(F=Object(s.a)(["\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: 1fr auto;\n  position: relative;\n"]))),U=p.a.input(K||(K=Object(s.a)(["\n  padding: 0 0.5rem;\n"]))),k=p.a.button(V||(V=Object(s.a)(["\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n"])));var M,G,z,q=function(e){e.addvideo;var t=Object(a.useState)(""),n=Object(b.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),c=Object(b.a)(o,2),d=c[0],l=c[1],s=Object(a.useState)({isFormValid:null,errorMsg:"",id:""}),p=Object(b.a)(s,2),O=p[0],f=p[1],v=H(d),g=v.data,m=v.isLoading;return Object(a.useEffect)((function(){var e,t,n={},i=(null===g||void 0===g||null===(e=g.items)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)?g.items[0]:null;console.log("data",g),null!==g&&(i?(n.youtubeId=i.id,n.id=i.id+Date.now(),n.title=i.snippet.title,n.timestamp=Date.now(),n.duration=function(e){var t="",n=e.replace("PT","").split("H");return n.length>1&&(t="".concat(n[0],":")),t+((n=n.slice(-1)[0].split("M")).length>1?n[0]<10?"0".concat(n[0],":"):"".concat(n[0],":"):"00:")+((n=n.slice(-1)[0].split("S")).length>1?n[0]<10?"0".concat(n[0]):"".concat(n[0]):"00")}(i.contentDetails.duration),A(n),r(""),l(""),f({isFormValid:null,errorMsg:"",id:""})):f((function(e){return Object(u.a)(Object(u.a)({},e),{},{isFormValid:!1,errorMsg:"error: video with that id doesn't exist"})})))}),[g]),Object(j.jsxs)(L,{onSubmit:function(e){e.preventDefault(),l("".concat("https://youtube.googleapis.com/youtube/v3/videos","?part=").concat("snippet,contentDetails","&key=").concat("AIzaSyAaDeAQGh5X6NRD4OK9iUjRlGnCAWPqEpg","&id=").concat(O.id)),console.log("addVideo: url: ",d)},children:[Object(j.jsx)(U,{type:"text",placeholder:"Enter youtube url or id",value:i,onChange:function(e){r(e.target.value),console.log("e.target.value",e.target.value),console.log("formValue",i),function(e){var t=function(e){var t={},n=function(e){var t="";return 11===e.length?e:e.includes("youtube.com")?void 0===(t=e.split("?v=")[1])?"":(-1!==t.indexOf("&")&&(t=t.slice(0,t.indexOf("&"))),t):""}(e);return n?function(e){return/[a-zA-Z0-9_-]{11}/.test(e)}(n)?(t.isValidId=!0,t.id=n):(t.error="error: invalid youtube id",t.isValidId=!1):(t.error="error: invalid url",t.isValidId=!1),t}(e);console.log("validateObj",t),t.isValidId?f({errorMsg:"",isFormValid:!0,id:t.id}):f((function(e){return Object(u.a)(Object(u.a)({},e),{},{isFormValid:!1,errorMsg:t.error})}))}(e.target.value)}}),Object(j.jsx)(k,{disabled:!O.isFormValid,children:m?Object(j.jsx)(N,{}):"Add"}),!1===O.isFormValid&&Object(j.jsx)(B,{children:O.errorMsg})]})},J=n(23),Q=p.a.div(M||(M=Object(s.a)(["\n  border: 1px solid #111;\n  padding: 1rem;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-rows: 2rem calc(90vh - 6rem);\n"]))),X=p.a.ul(G||(G=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"]))),Y=p.a.div(z||(z=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function Z(e){console.log("result",e);var t=e.destination,n=e.source,i=e.draggableId;if(t&&t.index!==n.index){var r=document.querySelector("ul").children[t.index].getAttribute("data-rbd-draggable-id");Promise.all([P(i),P(r)]).then((function(e){console.log("source doc",e[0]),console.log("destination doc",e[1]),D(r,"timestamp",e[0].timestamp),D(i,"timestamp",e[1].timestamp)}))}}var $,ee,te=function(){var e=Object(J.a)(T),t=Object(b.a)(e,1)[0];return Object(j.jsxs)(Q,{children:[Object(j.jsx)(q,{addVideo:A}),(null===t||void 0===t?void 0:t.length)>0?Object(j.jsx)(O.a,{onDragEnd:Z,children:Object(j.jsx)(O.c,{droppableId:"videos",children:function(e){return Object(j.jsxs)(X,Object(u.a)(Object(u.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t&&t.map((function(e,t){return Object(j.jsx)(m,{id:e.id,title:e.title,duration:e.duration,deleteVideo:R,index:t},e.id)})),e.placeholder]}))}})}):Object(j.jsx)(Y,{children:"No videos currently in playlist"})]})},ne=n(36),ie=n.n(ne),re=p.a.div($||($=Object(s.a)(["\n  border: 1px solid #111;\n"]))),oe=p.a.div(ee||(ee=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));var ae,ce=function(){var e=Object(J.a)(T),t=Object(b.a)(e,1)[0];return Object(j.jsx)(re,{children:(null===t||void 0===t?void 0:t.length)>0?Object(j.jsx)(ie.a,{width:"100%",height:"100%",playing:!0,controls:!0,url:"https://www.youtube.com/embed/".concat(t[0].youtubeId),onEnded:function(){console.log("end callback..."),R(t[0].id)}}):Object(j.jsx)(oe,{children:"Add a video to the playlist to show the video here!"})})},de=p.a.main(ae||(ae=Object(s.a)(["\n  width: 90vw;\n  height: 90vh;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-columns: 1fr 2fr;\n  position: absolute;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"])));var le=function(){return Object(j.jsxs)(de,{children:[Object(j.jsx)(te,{}),Object(j.jsx)(ce,{})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),o(e),a(e)}))};l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(le,{})}),document.getElementById("root")),se()}},[[64,1,2]]]);
//# sourceMappingURL=main.f856df51.chunk.js.map